<% provide(:title, "Kategorie") %>

<h3>Kategorie</h3>
<br>
<%= link_to "<span class='glyphicon glyphicon-file'></span> nowa kategoria".html_safe, new_category_path, class: "btn btn-primary btn-xs" %>
<br>
<br>
<div class="table-responsive">
	<table class="table table-hover category-table">
		<thead>
			<tr>
				<th></th>
				<th>Nazwa</th>
				<th>Tematy</th>
				<th>Posty</th>
				<th class="col-sm-1"></th>
				<th class="col-sm-1"></th>
			</tr>
		</thead>
		<tbody>
			<% @categories.each do |category| %>
			<tr>
				<td>
					<%= render 'categories/slider', cat: category %>
				</td>
				<td>
					<p>
						<%= link_to category.title, category %>
					</p>
				</td>
				<td>
					<%= category.topics.count %>
				</td>
				<td>
					<% category.topics.each{ |topic| @post_sum ? @post_sum += topic.post_count : @post_sum = 0 } %>
					<%= @post_sum + @post_sum = 0 %>
				</td>
				<td>
					<%= link_to "<span class='glyphicon glyphicon-pencil'></span> edytuj".html_safe, edit_category_path(category), class: "btn btn-default btn-sm" %>
				</td>
				<td>
					<%= render 'shared/delete_link', object: category %>
				</td>
			</tr>
			<% end %>
		</tbody>
	</table>
</div>
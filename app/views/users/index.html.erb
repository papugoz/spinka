<% provide(:title, "Użytkownicy") %>

<h3>Użytkownicy:</h3>

<%= pagination_links(@users) %>

<table class="table table-hover">
	<thead>
		<tr>
			<th>
				<%= render 'users/order_link', ordering: 'username', label: 'Login' %>
			</th>
			<th>
				<%= render 'users/order_link', ordering: 'email', label: 'Email' %>
			</th>
			<th>
				<%= render 'users/order_link', ordering: 'first_name', label: 'Imie' %>
			</th>
			<th>
				<%= render 'users/order_link', ordering: 'last_name', label: 'Nazwisko' %>
			</th>
			<th>Funkcje</th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		<% @users.order("#{params[:order]} #{params[:asc]}").each do |user| %>
		<tr>
			<td><%= link_to user.username, user_path(user) %></td>
			<td><%= user.email %></td>
			<td><%= user.first_name %></td>
			<td><%= user.last_name %></td>
			<td><%= 'Administrator' if user.admin == true %> <%= 'Moderator' if user.moderator == true %> <%= 'Redaktor' if user.editor == true %></td>
			<% if current_user.admin? && !current_user?(user) %>
			<td>
				<%= link_to "usuń", user, method: :delete, data: { confirm: "Na pewno?" } %>
			</td>
			<% end %>
		</tr>
		<% end %>
	</tbody>
</table>

<%= pagination_links(@users) %>
